function chatCtrl(e,t){var a=this,s=t();a.prevMessages=e.getMessages(),a.lastMessages=e.getLastMessages(),a.sendMessage=function(){if(null!=a.user)var t={text:a.textMessage,authorName:a.user.displayName,authorId:a.user.uid,avatar:a.user.photoURL,date:(new Date).toLocaleString()};if(""!=a.textMessage){e.sendMessage(t),a.textMessage="";var s=$(".panel-body"),n=$("li:last-child");s.animate({scrollTop:n.offset().top-s.offset().top+s.scrollTop()})}},a.login=function(){s.$signInWithPopup("google")},a.logout=function(){s.$signOut()},s.$onAuthStateChanged(function(e){a.user=e})}function chatService(e){var t=firebase.database().ref().child("messages"),a={};return a.getLastMessages=function(){return e(t.limitToLast(15))},a.getMessages=function(){return e(t)},a.sendMessage=function(e){a.getMessages().$add(e)},a}function sendByCtrlEnter(){return function(e,t,a){t.bind("keydown",function(t){t.ctrlKey&&13===t.which&&(e.$apply(function(){e.$eval(a.sendByCtrlEnter)}),t.preventDefault())})}}function purifyDate(){return function(e,t,a){a.purifyDate}}var config={apiKey:"AIzaSyAeehijCd9Qcni01ZAvHwg7Z_KO7mBlSjc",authDomain:"cbschat-37108.firebaseapp.com",databaseURL:"https://cbschat-37108.firebaseio.com",projectId:"cbschat-37108",storageBucket:"cbschat-37108.appspot.com",messagingSenderId:"295539827152"};firebase.initializeApp(config),angular.module("cbsChat",["firebase","ngAnimate"]),angular.module("cbsChat").controller("chatCtrl",["ChatService","$firebaseAuth",chatCtrl]),angular.module("cbsChat").factory("ChatService",["$firebaseArray",chatService]),angular.module("cbsChat").directive("sendByCtrlEnter",[sendByCtrlEnter]),angular.module("cbsChat").directive("purifyDate",[purifyDate]);